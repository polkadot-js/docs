"use strict";(self.webpackChunkpolkadot_js=self.webpackChunkpolkadot_js||[]).push([[8408],{4137:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return m}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),c=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},p=function(e){var t=c(e.components);return a.createElement(l.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},h=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),u=c(n),h=r,m=u["".concat(l,".").concat(h)]||u[h]||d[h]||i;return n?a.createElement(m,o(o({ref:t},p),{},{components:n})):a.createElement(m,o({ref:t},p))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=h;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[u]="string"==typeof e?e:r,o[1]=s;for(var c=2;c<i;c++)o[c]=n[c];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}h.displayName="MDXCreateElement"},6724:function(e,t,n){n.r(t),n.d(t,{assets:function(){return p},contentTitle:function(){return l},default:function(){return m},frontMatter:function(){return s},metadata:function(){return c},toc:function(){return u}});var a=n(7462),r=n(3366),i=(n(7294),n(4137)),o=["components"],s={title:"Transactions"},l=void 0,c={unversionedId:"api/start/api.tx",id:"api/start/api.tx",title:"Transactions",description:"Transaction endpoints are exposed, as determined by the metadata, on the api.tx endpoint. These allow you to submit transactions for inclusion in blocks, be it transfers, setting information or anything else your chain supports.",source:"@site/docs/api/start/api.tx.md",sourceDirName:"api/start",slug:"/api/start/api.tx",permalink:"/docs/api/start/api.tx",draft:!1,editUrl:"https://github.com/polkadot-js/docs/edit/master/docs/api/start/api.tx.md",tags:[],version:"current",frontMatter:{title:"Transactions"},sidebar:"reference",previous:{title:"Query extras",permalink:"/docs/api/start/api.query.other"},next:{title:"Keyring",permalink:"/docs/api/start/keyring"}},p={},u=[{value:"Simple transactions",id:"simple-transactions",level:2},{value:"Under the hood",id:"under-the-hood",level:2},{value:"Into the keyring we go",id:"into-the-keyring-we-go",level:2}],d={toc:u},h="wrapper";function m(e){var t=e.components,n=(0,r.Z)(e,o);return(0,i.kt)(h,(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"Transaction endpoints are exposed, as determined by the metadata, on the ",(0,i.kt)("inlineCode",{parentName:"p"},"api.tx")," endpoint. These allow you to submit transactions for inclusion in blocks, be it transfers, setting information or anything else your chain supports."),(0,i.kt)("h2",{id:"simple-transactions"},"Simple transactions"),(0,i.kt)("p",null,"To start off, let's make a balance transfer from Alice to Bob."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"...\n\n// Sign and send a transfer from Alice to Bob\nconst txHash = await api.tx.balances\n  .transferKeepAlive(BOB, 12345)\n  .signAndSend(alice);\n\n// Show the hash\nconsole.log(`Submitted with hash ${txHash}`);\n")),(0,i.kt)("p",null,"We have already become familiar with the ",(0,i.kt)("inlineCode",{parentName:"p"},"Promise")," syntax that is used throughout the API, in this case it is no different. We construct a transaction by calling ",(0,i.kt)("inlineCode",{parentName:"p"},"balances.transferKeepAlive(<accountId>, <value>)")," with the required params and then as a next step we submit it to the node."),(0,i.kt)("p",null,"As with all other API operations, the ",(0,i.kt)("inlineCode",{parentName:"p"},"to"),' params just needs to be "account-like" and the value params needs to be "number-like", the API will take care of encoding and conversion into the correct format.'),(0,i.kt)("p",null,"The result for this call (we will deal with subscriptions in a short while), is the transaction hash. This is a hash of the data and receiving this does not mean that transaction has been included, but rather only that it has been accepted for propagation by the node. (It can still fail on execution, we will handle this in some of our follow-up sections.)"),(0,i.kt)("h2",{id:"under-the-hood"},"Under the hood"),(0,i.kt)("p",null,"Despite the single-line format of ",(0,i.kt)("inlineCode",{parentName:"p"},"signAndSend"),", there is a lot happening under the hood (and all of this can be manually provided) -"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Based on the sender, the API will query ",(0,i.kt)("inlineCode",{parentName:"li"},"system.account")," (or ",(0,i.kt)("inlineCode",{parentName:"li"},"system.accountNonce")," on older chains) to determine the next nonce to use"),(0,i.kt)("li",{parentName:"ul"},"The API will retrieve the current block hash and use it to create a mortal transaction, i.e. the transaction will only be valid for a limited number of blocks (by default this is 5 mins at 6s block times)"),(0,i.kt)("li",{parentName:"ul"},"It will construct a payload and sign this, this includes the ",(0,i.kt)("inlineCode",{parentName:"li"},"genesisHash"),", the ",(0,i.kt)("inlineCode",{parentName:"li"},"blockHash")," for the start of the mortal era as well as the current chain ",(0,i.kt)("inlineCode",{parentName:"li"},"specVersion")),(0,i.kt)("li",{parentName:"ul"},"The transaction is submitted to the node")),(0,i.kt)("p",null,"As suggested, you can override all of this, i.e. by retrieving the nonce yourself and passing that as an option, i.e. ",(0,i.kt)("inlineCode",{parentName:"p"},"signAndSend(alice, { nonce: aliceNonce })"),", this could be useful when manually tracking and submitting transactions in bulk."),(0,i.kt)("h2",{id:"into-the-keyring-we-go"},"Into the keyring we go"),(0,i.kt)("p",null,"With the examples above, the variable ",(0,i.kt)("inlineCode",{parentName:"p"},"alice")," seems to have appeared from thin air. To understand how transactions are signed, we will take a ",(0,i.kt)("a",{parentName:"p",href:"/docs/api/start/keyring"},"brief diversion into the keyring")," before returning to our regularly scheduled program."))}m.isMDXComponent=!0}}]);